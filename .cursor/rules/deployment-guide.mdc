---
description:
globs:
alwaysApply: false
---
# 部署指南

文颜 MCP Server 支持两种部署方式：本地运行和 Docker 容器运行。

## 本地运行

### 环境准备

确保已安装 [Node.js](https://nodejs.org/) 环境。

### 构建步骤

1. 克隆仓库并安装依赖：

```bash
git clone https://github.com/caol64/wenyan-mcp.git
cd wenyan-mcp
npm install
```

2. 编译项目：

```bash
npx tsc -b && npm run copy-assets
```

### MCP 客户端配置

在 MCP 配置文件中添加：

```json
{
  "mcpServers": {
    "wenyan-mcp": {
      "name": "公众号助手",
      "command": "node",
      "args": [
        "Your/path/to/wenyan-mcp/dist/index.js"
      ],
      "env": {
        "WECHAT_APP_ID": "your_app_id",
        "WECHAT_APP_SECRET": "your_app_secret"
      }
    }
  }
}
```

## Docker 运行

### 构建镜像

使用项目根目录下的 [Dockerfile](mdc:Dockerfile)：

```bash
docker build -t wenyan-mcp .
```

### MCP 客户端配置

在 MCP 配置文件中添加：

```json
{
  "mcpServers": {
    "wenyan-mcp": {
      "name": "公众号助手",
      "command": "docker",
      "args": [
        "run",
        "--rm",
        "-i",
        "-v", "/your/host/image/path:/mnt/host-downloads",
        "-e", "WECHAT_APP_ID=your_app_id",
        "-e", "WECHAT_APP_SECRET=your_app_secret",
        "-e", "HOST_IMAGE_PATH=/your/host/image/path",
        "wenyan-mcp"
      ]
    }
  }
}
```

## 环境变量

- `WECHAT_APP_ID` - 微信公众号平台的 App ID
- `WECHAT_APP_SECRET` - 微信平台的 App Secret
- `HOST_IMAGE_PATH` - 宿主机图片目录（Docker 模式下）

## 微信公众号配置

请将服务器 IP 添加到公众号平台的 IP 白名单，确保上传接口调用成功。
